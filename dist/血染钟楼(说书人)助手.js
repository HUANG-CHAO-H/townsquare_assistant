/*! 
// ==UserScript==
// @name         血染钟楼(说书人)助手
// @namespace    http://tampermonkey.net/
// @version      0.0.1
// @description  向https://www.imdodo.com/tools/clocktower/页面注入一些JavaScript代码，来帮助说书人完成一些自动化操作，让说书人能够更加高效的工作
// @author       huangchao.hello
// @match        https://www.imdodo.com/tools/clocktower/
// @require      https://unpkg.com/react@18/umd/react.production.min.js
// @require      https://unpkg.com/react-dom@18/umd/react-dom.production.min.js
// @require      https://unpkg.com/@douyinfe/semi-ui@2.17.1/dist/umd/semi-ui.min.js
// @require      https://unpkg.com/@douyinfe/semi-icons@2.17.1/dist/umd/semi-icons.min.js
// @require      https://unpkg.com/@douyinfe/semi-illustrations@2.15.0/dist/umd/semi-illustrations.min.js
// @icon         <$ICON$>
// ==/UserScript==
 */
(function(l,w){typeof exports=="object"&&typeof module<"u"?w(require("react"),require("react-dom"),require("@douyinfe/semi-ui"),require("@douyinfe/semi-icons")):typeof define=="function"&&define.amd?define(["react","react-dom","@douyinfe/semi-ui","@douyinfe/semi-icons"],w):(l=typeof globalThis<"u"?globalThis:l||self,w(l.React,l.ReactDOM,l.SemiUI,l.SemiIcons))})(this,function(l,w,a,oe){"use strict";const _=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},v=_(l),ie=_(w);var B={},G=ie.default;B.createRoot=G.createRoot,B.hydrateRoot=G.hydrateRoot;function le(e){const t=new Map;for(const r of Object.keys(e))t.set(r,new Set);const n=Object.assign({},e);return n.observe=(r,o)=>{const i=t.get(r);if(i)i.add(o);else throw new Error("key is unknown")},n.unobserve=(r,o)=>{const i=t.get(r);if(i)i.delete(o);else throw new Error("key is unknown")},n.wait=(r,o,i)=>new Promise((c,d)=>{if(o(n[r]))return c();const h=t.get(r);if(!h)throw new Error("key is unknown");const f=S=>{o(S)&&(h.delete(f),c())};h.add(f),i&&setTimeout(d,i,"ReactiveData.wait Error: wait timeout")}),new Proxy(n,{set(r,o,i){if(r[o]===i)return!0;if(o==="observe"||o==="unobserve"||o==="wait")return!1;const c=t.get(o);if(!c)return!1;r[o]=i;for(let d of c)d(i);return!0}})}const j=new Set;function L(e){if(j.has(e))return;const t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t),j.add(e)}const M=new Map;async function V(e){let t=M.get(e);if(t)return t;const n=await fetch(e);if(n.status!==200){console.error("\u52A0\u8F7DJSON\u8D44\u6E90\u5931\u8D25");return}return t=await n.json(),M.set(e,t),t}function p(e){return new Promise(t=>setTimeout(t,e))}function st(e){return e}function C(e){if(!e){console.error("dispatchClickEvent Error: element \u4E0D\u5B58\u5728");return}e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}const se="https://raw.githubusercontent.com/HUANG-CHAO-H/townsquare_assistant/master/static/roles.json",ae="https://raw.githubusercontent.com/HUANG-CHAO-H/townsquare_assistant/master/static/editions.json";function k(e,t="png"){return`https://raw.githubusercontent.com/bra1n/townsquare/develop/src/assets/icons/${e}.${t}`}function H(e,t){if(t==="CN")switch(e){case"townsfolk":return"\u6751\u6C11";case"outsider":return"\u5916\u6765\u8005";case"minion":return"\u722A\u7259";case"demon":return"\u6076\u9B54";case"traveler":return"\u65C5\u884C\u8005";default:return"\u672A\u77E5\u7C7B\u578B"}else if(t==="number")switch(e){case"townsfolk":return 0;case"outsider":return 1;case"minion":return 2;case"demon":return 3;case"traveler":return 4;default:return 5}return e}function ce(e){return typeof e=="string"&&(e=JSON.parse(e)),e.edition=e.edition||{id:""},e.bluffs=e.bluffs||[],e.fabled=e.fabled||[],e.roles=e.roles||[],e.players=e.players||[],e.players.forEach(de),e}function de(e){return typeof e=="string"&&(e=JSON.parse(e)),e.id=e.id||"",e.name=String(e.name)||"",e.pronouns=e.pronouns||"",e.avatarUrl=e.avatarUrl||"",e.role=e.role||"",e.countUnread=e.countUnread||0,e.isDead=e.isDead||!1,e.isMute=e.isMute||!1,e.isOpenMic=e.isOpenMic||!1,e.isTalking=e.isTalking||!1,e.isVoteless=e.isVoteless||!1,e.reminders=e.reminders||[],e}function he(e){return typeof e=="string"&&(e=JSON.parse(e)),e.id=e.id||"",e.name=e.name||"",e.team=e.team||"unknown",e.ability=e.ability||"",e.edition=e.edition||"",e.firstNight=e.firstNight||0,e.firstNightReminder=e.firstNightReminder||"",e.otherNight=e.otherNight||0,e.otherNightReminder=e.otherNightReminder||"",e.reminders=e.reminders||[],e.remindersGlobal=e.remindersGlobal||[],e.setup=e.setup||!1,e}function fe(e){return typeof e=="string"&&(e=JSON.parse(e)),e.id=e.id||"",e.name=e.name||"",e.author=e.author||"",e.description=e.description||"",e.level=e.level||"unknown",e.roles=e.roles||[],e.isOfficial=e.isOfficial||!1,e}const s=le({rolesUrl:"",roles:{},editionsUrl:"",editions:{},gameStateString:"",gameState:void 0,statePolling:!1,statePollTime:300,chatTitle:"",chatContent:null,chatInput:"",chatPolling:!1,chatPollTime:300});s.observe("rolesUrl",async e=>{if(!e)return s.roles={};s.roles=await ve(e)});function ve(e){return e?V(e).then(t=>{if(!(t instanceof Array))return Promise.reject("\u52A0\u8F7Droles\u6570\u636E\u5931\u8D25");const n={};for(const r of t)n[r.id]=he(r);return n}):Promise.reject("url\u4E3A\u7A7A")}s.observe("editionsUrl",async e=>{if(!e)return s.editions={};s.editions=await ge(e)});function ge(e){return e?V(e).then(t=>{if(!(t instanceof Array))return Promise.reject("\u52A0\u8F7Droles\u6570\u636E\u5931\u8D25");const n={};for(const r of t)n[r.id]=fe(r);return n}):Promise.reject("url\u4E3A\u7A7A")}s.observe("gameStateString",e=>{e||(s.gameState=void 0),s.gameState=ce(e)}),s.rolesUrl=se,s.editionsUrl=ae;function P(){const e=document.querySelector("div.menu > ul");if(!e)throw new Error("getSettingUl: \u8BBE\u7F6E\u5217\u8868\u7684 ul \u5143\u7D20\u5931\u8D25");return e}function me(e=P()){const t=e.querySelector("li.tabs > svg.fa-question");if(!t)throw new Error("getSettingHelp: \u672A\u6355\u6349\u5230help\u6309\u94AE");return t}function W(e=P()){const t=e.querySelectorAll("li");if(!t||!t.length)throw new Error("getSettingJSON: \u672A\u6355\u83B7\u5230li\u6570\u7EC4");return t.length===9&&t[4].innerText.includes("JSON")?t[4]:null}function E(){const e=document.querySelector("div.modal-backdrop.game-state");return e?e.firstChild:(console.warn("getGameStateJsonDiv: \u672A\u6355\u83B7\u5230\u6E38\u620F\u72B6\u6001\u5F39\u7A97\u6240\u5728\u7684DIV"),null)}function pe(e=E()){if(!e)return null;const t=e.querySelector("div.slot > textarea");if(!t)throw new Error("getGameStateJsonTextarea: \u672A\u6355\u83B7\u5230textarea \u8282\u70B9");return t}function ye(e){const t=document.querySelectorAll("#townsquare > ul.circle > li");if(e<1||e>t.length)throw new Error("getSeatDiv: seatNumber \u8D85\u51FA\u4E86\u9884\u5B9A\u8303\u56F4: "+e);const n=t[e-1].querySelector("div.player");if(!n)throw new Error("getSeatDiv: \u672A\u6355\u6349\u5230\u7528\u6237\u5EA7\u4F4D\u6240\u5728\u7684div");return n}function g(){const e=document.querySelector("div.df-chat-detail");return e||console.warn("getChatDetailDiv: \u672A\u6355\u83B7\u5230\u804A\u5929\u7A97\u53E3\u6240\u5728\u7684DIV"),e}function we(e=g()){if(!e)return null;const t=e.querySelector("div.title-wrap > div.title");if(!t)throw new Error("getChatTitleDiv \u672A\u6355\u83B7\u5230title\u6240\u5728\u7684div");return t}function Ce(e=g()){if(!e)return null;const t=e.querySelector("div.df-scroll_wrap");if(!t)throw new Error("getChatContentDiv \u672A\u6355\u83B7\u5230content\u6240\u5728\u7684div");return t}function Se(e=g()){if(!e)return null;const t=e.querySelector("div.input-wrap div#content");if(!t)throw new Error("getChatContentDiv \u672A\u6355\u83B7\u5230\u8F93\u5165\u6846\u6240\u5728\u7684div");return t}function Ee(e=g()){if(!e)return null;const t=e.querySelector("div.input-wrap > div > div.btn");if(!t)throw new Error("getChatContentDiv \u672A\u6355\u83B7\u5230\u53D1\u9001\u6309\u94AE\u6240\u5728\u7684div");return t}function be(){return $(!0)}function De(){return $(!1)}function xe(e=E()){return e?pe(e).value:""}async function Ae(e,t=ye(e)){let n=t.querySelector("ul.menu");if(!n){C(t.querySelector("div.name"));for(let o=0;o<10&&(n=t.querySelector("ul.menu"),!n);o++)await p(50);if(!n)throw new Error("openChatWindow Error: \u6253\u5F00\u73A9\u5BB6\u83DC\u5355\u5931\u8D25")}const r=n.lastChild;C(r);for(let o=0;o<10;o++){const i=g();if(i)return i;await p(50)}throw new Error("openChatWindow Error: \u6253\u5F00\u804A\u5929\u7A97\u53E3\u5931\u8D25")}function Be(e=g()){return e?we(e).innerText:""}function ke(e=g()){return e?Ce(e).cloneNode(!0).childNodes:null}function Pe(e="",t=g()){if(!t)return!1;const n=Se(t);n.innerHTML=e;const r=new InputEvent("input");return n.dispatchEvent(r),!0}function Ne(e=g()){if(!e)return;const t=Ee(e);return C(t)}async function $(e=!0){const t=E();if(e&&t||!e&&!t)return t;const n=P();let r=W(n);if(!r){C(me(n));for(let o=0;o<10&&(r=W(n),!r);o++)await p(50);if(!r)throw new Error("\u672A\u6355\u6349\u5230JSON\u6309\u94AE")}C(r);for(let o=0;o<10;o++){const i=E();if(e&&i||!e&&!i)return i;await p(50)}throw new Error("\u6E38\u620F\u72B6\u6001\u5BF9\u8BDD\u6846\u5207\u6362\u5931\u8D25")}s.observe("chatInput",e=>Pe(e));async function Te(){for(;;){await s.wait("statePolling",t=>Boolean(t));const e=await be();for(;s.gameStateString=xe(e),await p(s.statePollTime),!!s.statePolling;);await De()}}Te().catch(e=>console.error("gameStateLoop\u8F6E\u8BE2\u88AB\u4E2D\u65AD",e));async function Fe(){for(;;)for(await s.wait("chatPolling",e=>Boolean(e));;){const e=g();if(e&&(s.chatTitle=Be(e),s.chatContent=ke(e)),await p(s.chatPollTime),!s.chatPolling)break}}Fe().catch(e=>console.error("chatLoop\u8F6E\u8BE2\u88AB\u4E2D\u65AD",e));var b={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=v.default,Re=Symbol.for("react.element"),ze=Symbol.for("react.fragment"),Oe=Object.prototype.hasOwnProperty,_e=qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,n){var r,o={},i=null,c=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)Oe.call(t,r)&&!Ge.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Re,type:e,key:i,ref:c,props:o,_owner:_e.current}}D.Fragment=ze,D.jsx=J,D.jsxs=J,function(e){e.exports=D}(b);const Y=b.exports.Fragment,u=b.exports.jsx,m=b.exports.jsxs;function X(e){const{avatar:t,popover:n,label:r,divContainerAttr:o={}}=e;o.style=Object.assign(o.style||{},{display:"flex",alignItems:"center"});const i=r?u("div",{style:{paddingLeft:"5px"},children:r}):null;return n?u(a.Popover,{position:"bottomLeft",content:n,mouseEnterDelay:500,children:m("div",{...o,children:[t,i]})}):m("div",{...o,children:[t,i]})}const K=v.default.memo(e=>{const{roleInfo:t,size:n,showName:r=!0,showDetailCard:o=!0,divContainerAttr:i}=e,c=r?u("div",{style:{fontSize:n,paddingLeft:"5px"},children:t.name}):null;return u(X,{avatar:u(a.Avatar,{size:n,src:k(t.id)}),label:c,divContainerAttr:i,popover:o?u(je,{role:t}):null})}),je=v.default.memo(e=>{const t=e.role,n=[{key:"\u89D2\u8272ID",value:t.id},{key:"\u89D2\u8272\u540D\u79F0",value:t.name},{key:"\u89D2\u8272\u7C7B\u578B",value:u(a.Tag,{color:Le(t.team),children:H(t.team,"CN")})},{key:"\u89D2\u8272\u80FD\u529B",value:t.ability},{key:"\u9996\u591C\u6280\u80FD",value:t.firstNightReminder},{key:"\u975E\u9996\u591C\u6280\u80FD",value:t.otherNightReminder}];return u(a.Card,{bordered:!1,headerLine:!0,style:{width:300},headerStyle:{padding:"10px 20px"},title:m("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u("span",{style:{color:"black",fontSize:"x-large",fontWeight:"400"},children:t.name}),u(a.Avatar,{size:"small",src:k(t.id)})]}),children:u(a.Descriptions,{data:n})})});function Le(e){switch(H(e,"number")){case 0:return"blue";case 1:return"light-blue";case 2:return"orange";case 3:return"red";case 4:return"green";default:return"grey"}}const Q=v.default.memo(e=>{const{playerInfo:t,size:n="small",showName:r=!0,showDetailCard:o=!0,divContainerAttr:i}=e;let c=u(a.Avatar,{size:n,src:t.avatarUrl});t.countUnread?c=u(a.Badge,{count:t.countUnread,type:"primary",children:c}):t.isDead&&(c=u(a.Badge,{count:"\u6B7B",type:"danger",children:c}));const d=r?u("div",{style:{fontSize:n,paddingLeft:"5px"},children:u("span",{style:t.isDead?Me:void 0,children:t.name})}):null;return u(X,{avatar:c,label:d,divContainerAttr:i,popover:o?u(Ve,{player:t}):null})}),Me={textDecoration:"line-through",color:"gray"},Ve=v.default.memo(e=>{const t=e.player,n=[{key:"\u7528\u6237ID",value:t.id},{key:"username",value:t.name},{key:"\u81EA\u5B9A\u4E49\u522B\u79F0",value:t.pronouns},{key:"\u5B58\u6D3B\u72B6\u6001",value:t.isDead?"\u6B7B\u4EA1":"\u5B58\u6D3B"},{key:"\u662F\u5426\u6709\u6295\u7968\u6743",value:t.isVoteless?"\u65E0":"\u6709"},{key:"\u81EA\u5B9A\u4E49\u6807\u8BB0",value:t.reminders.map(r=>u(a.Tag,{style:{marginRight:5,marginBottom:5},color:"blue",children:r.name}))}];return u(a.Card,{bordered:!1,headerLine:!0,style:{width:250},headerStyle:{padding:"10px 20px"},title:m("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u("span",{style:{color:"black",fontSize:"x-large",fontWeight:"400"},children:t.name}),u(a.Avatar,{size:"small",src:t.avatarUrl})]}),children:u(a.Descriptions,{data:n})})}),Z=v.default.createContext(void 0);function N(){return l.useContext(Z)}function He(e){const[t,n]=l.useState(void 0);return l.useEffect(()=>(n(s.gameState),s.observe("gameState",n),()=>s.unobserve("gameState",n)),[]),u(Z.Provider,{value:t,children:e.children})}const U=v.default.createContext(void 0);function We(){return l.useContext(U)}function $e(e){const[t,n]=l.useState({}),[r,o]=l.useState();l.useEffect(()=>(n(s.editions),s.observe("editions",n),()=>s.unobserve("editions",n)),[]);const i=N();l.useEffect(()=>{if(!(i!=null&&i.edition.id)){o(void 0);return}o(t[i.edition.id])},[t,i==null?void 0:i.edition]);const c=l.useMemo(()=>({allEditions:t,currentEdition:r}),[t,r]);return u(U.Provider,{value:c,children:e.children})}const I=v.default.createContext(void 0);function ee(){return l.useContext(I)}function Je(e){const[t,n]=l.useState({}),[r,o]=l.useState({});l.useEffect(()=>(n(s.roles),s.observe("roles",n),()=>s.unobserve("roles",n)),[]);const i=We();l.useEffect(()=>{if(!(i!=null&&i.currentEdition))return;const d=i.currentEdition.roles,h={};for(const f of d)t[f]&&(h[f]=t[f]);o(h)},[t,i==null?void 0:i.currentEdition]);const c=l.useMemo(()=>({allRoles:t,currentRoles:r}),[t,r]);return u(I.Provider,{value:c,children:e.children})}const te=v.default.createContext(void 0);function T(){return l.useContext(te)}function Ye(e){const t=N(),n=ee(),[r,o]=l.useState(void 0),[i,c]=l.useState(void 0),[d,h]=l.useState(0),[f,S]=l.useState(""),[ue,z]=l.useState(null);l.useEffect(()=>(S(s.chatTitle),z(s.chatContent),s.observe("chatTitle",S),s.observe("chatContent",z),()=>{s.unobserve("chatTitle",S),s.unobserve("chatContent",z)}),[]),l.useEffect(()=>{if(!t)return;const O=t.players.findIndex(A=>A.name===f);if(O>=0){const A=t.players[O];o(A),h(O+1),c(n==null?void 0:n.currentRoles[A.role])}else o(void 0),c(void 0),h(0)},[t==null?void 0:t.players,n==null?void 0:n.currentRoles,f]);const lt=l.useMemo(()=>({chatPlayer:r,chatRole:i,chatPlayerSeat:d,chatTitle:f,chatContent:ue,dispatchSendMsg:Ne}),[r,d,f,ue]);return u(te.Provider,{value:lt,children:e.children})}function Xe(){const e=T(),[t,n]=l.useState("");x=n;const r=l.useRef(null);if(l.useEffect(()=>{const d=r.current;if(!d)return;const h=d.firstChild,f=h.childNodes.length;h.innerHTML="",e!=null&&e.chatContent&&(h.append(...e.chatContent),f!==h.childNodes.length&&(d.scrollTop=d.scrollHeight))},[e==null?void 0:e.chatContent]),!e)return null;const{chatPlayer:o,chatPlayerSeat:i}=e;if(!o)return null;const c=()=>{!t||(s.chatInput=t,p(50).then(e.dispatchSendMsg).then(()=>n("")))};return m("div",{style:Ke,children:[m("div",{style:{display:"flex"},children:[u(a.Avatar,{color:"light-blue",shape:"square",alt:"0",children:u("span",{style:{fontSize:"x-large"},children:i})}),e.chatRole?u(K,{roleInfo:e.chatRole,showName:!1}):null,u(Q,{playerInfo:o})]}),u("div",{style:{margin:"5px 0"},children:F.map(d=>u(d,{size:"small"}))}),u("div",{ref:r,style:Qe,children:u("div",{})}),m(a.Row,{gutter:16,type:"flex",align:"middle",children:[u(a.Col,{span:20,children:u(a.TextArea,{value:t,onChange:n,onEnterPress:c})}),u(a.Col,{span:4,children:u(a.Button,{block:!0,onClick:c,children:"\u53D1\u9001"})})]})]})}let x;function ne(e){x==null||x(e)}const Ke={color:"black",padding:"10px 0",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},Qe={overflowX:"auto",overflowY:"scroll",borderStyle:"inset",borderWidth:"2px",flexGrow:1,flexShrink:1,marginBottom:5},F=[];F.push(e=>{const t=T(),n=()=>{var o;if(!t)return;const r=((o=t.chatRole)==null?void 0:o.firstNightReminder)||"";ne(r)};return u(a.Button,{size:e.size,style:e.style,className:e.className,onClick:n,children:"\u751F\u6210\u9996\u591C\u4FE1\u606F"})}),F.push(e=>{const t=T(),n=()=>{var o;if(!t)return;const r=((o=t.chatRole)==null?void 0:o.otherNightReminder)||"";ne(r)};return u(a.Button,{size:e.size,style:e.style,className:e.className,onClick:n,children:"\u751F\u6210\u975E\u9996\u591C\u4FE1\u606F"})});const q={width:0,height:0},Ze=v.default.createContext(q);function re(e){const t=l.useRef(null),[n,r]=l.useState(q),[o,i]=l.useState(0);return l.useEffect(()=>{let c;const d=()=>{c===void 0&&(c=setTimeout(()=>{i(h=>++h),c=void 0},300))};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),l.useEffect(()=>{const c=t.current;if(!c)return i(d=>++d);r({width:c.clientWidth||0,height:c.clientHeight||0})},[t.current,o]),u(Ze.Provider,{value:n,children:u("div",{style:Ue,ref:t,children:n===q?null:e.children})})}const Ue={position:"relative",width:"100%",height:"100%",boxSizing:"border-box",margin:0,padding:0,overflow:"hidden"};function Ie(e){const{roleId:t,name:n,size:r,style:o}=e,i=k(t);return u(a.Tooltip,{content:n,children:u(a.Avatar,{size:r,src:i,style:o})})}const et={width:"100%",height:"100%",boxSizing:"border-box",margin:0,padding:0,overflow:"auto"};function tt(){const e=N(),t=ee(),n=l.useMemo(()=>{const r=(e==null?void 0:e.players)||[],o=(t==null?void 0:t.currentRoles)||{};return r.map(i=>({player:i,role:o[i.role]}))},[e==null?void 0:e.players,t==null?void 0:t.currentRoles]);return u("div",{style:et,children:u(a.Table,{bordered:!0,columns:nt,dataSource:n,pagination:!1})})}const nt=[{title:"\u5EA7\u4F4D\u53F7",dataIndex:"seatIndex",width:50,align:"center",render(e,t,n){return String(n+1)}},{title:"\u73A9\u5BB6",dataIndex:"name",width:150,render(e,t){return u(Q,{playerInfo:t.player,size:"small"})}},{title:"\u89D2\u8272",width:150,render(e,t){const n=t.role;return n?u(K,{roleInfo:n}):null}},{title:"\u9996\u591C",width:50,align:"center",render(e,t){const n=t.role;return n!=null&&n.firstNight?u(a.Tooltip,{content:n.firstNightReminder||"",children:u(a.Avatar,{size:"small",color:"red",shape:"square",alt:"0",children:n.firstNight})}):null}},{title:"\u975E\u9996\u591C",width:50,align:"center",render(e,t){const n=t.role;return n!=null&&n.otherNight?u(a.Tooltip,{content:n.otherNightReminder||"",children:u(a.Avatar,{size:"small",color:"green",shape:"square",alt:"0",children:n.otherNight})}):null}},{title:"\u81EA\u5B9A\u4E49\u6807\u8BB0",width:200,align:"center",render(e,t){const n=t.player.reminders;return n!=null&&n.length?u(Y,{children:n.map(r=>r.role==="custom"?u(a.Tooltip,{content:r.name,children:u(a.Avatar,{size:"small",color:"green",alt:"0",children:r.name})}):(console.log("reminder =",r),u(Ie,{roleId:r.role,name:r.name})))}):null}},{title:"\u64CD\u4F5C",width:100,align:"center",render(e,t,n){return u(a.Button,{icon:u(oe.IconComment,{style:{color:"#1abc9c"}}),onClick:()=>Ae(n+1)})}}];function rt(){const[e,t]=l.useState(!1),n=l.useCallback(()=>t(r=>!r),[]);return l.useEffect(()=>{e?(s.statePolling=!0,s.chatPolling=!0):(s.statePolling=!1,s.chatPolling=!1)},[e]),m(Y,{children:[u(a.Button,{theme:"solid",type:"secondary",onClick:n,style:ut,children:"\u52A9\u624B"}),u(He,{children:u($e,{children:u(Je,{children:u(Ye,{children:u(a.SideSheet,{closeOnEsc:!0,placement:"bottom",height:"80%",headerStyle:ot,bodyStyle:it,visible:e,onCancel:n,children:m(a.Row,{gutter:16,style:R,children:[u(a.Col,{style:R,span:16,children:u(re,{children:u(tt,{})})}),u(a.Col,{style:R,span:8,children:u(re,{children:u(Xe,{})})})]})})})})})})]})}const ut={position:"absolute",top:0,left:"70%"},ot={display:"none"},it={padding:0,overflow:"hidden"},R={height:"100%"},y=document.createElement("div");y.id="assist-root",y.style.position="absolute",y.style.top="0",y.style.width="100%",document.body.appendChild(y),L("https://unpkg.com/@douyinfe/semi-ui@2.17.1/dist/css/semi.css"),L("https://unpkg.com/@douyinfe/semi-icons@2.17.1/dist/css/semi-icons.css"),B.createRoot(y).render(u(v.default.StrictMode,{children:u(rt,{})}))});
